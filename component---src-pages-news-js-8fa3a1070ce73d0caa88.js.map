{"version":3,"sources":["webpack:///./src/components/common/subpages/article.js","webpack:///./src/components/common/subpages/subpageNews.js","webpack:///./src/pages/news.js","webpack:///./src/assets/illustrations/upVote.png"],"names":["articleId","submitVote","setServiceError","a","console","log","then","result","catch","e","Article","title","domain","url","createdAt","author","totalScore","useMoralisCloudFunction","autoFetch","fetch","voteSubmitError","data","error","isLoading","useEffect","message","hoursAgo","Date","getTime","style","paddingLeft","fontWeight","cursor","height","marginRight","onClick","handleVote","src","upVote","textDecoration","color","href","fontSize","marginBottom","parseInt","Number","parseFloat","toFixed","compare","b","SubpageNews","useMoralisQuery","articles","useMoralis","authenticate","isAuthenticated","user","useState","setTitle","setUrl","serviceError","isSubmissionVisible","setSubmissionVisibility","generalError","setGeneralError","generalInfo","setGeneralInfo","saveArticle","saveArticleResult","saveArticleError","saveArticleIsLoading","rankedArticles","shnWeightedBalance","width","boxShadow","display","alignItems","background","margin","paddingRight","handleNavBarSumbit","marginLeft","backgroundHover","signingMessage","get","htmlFor","value","onChange","target","handleTitleChange","type","id","name","handleUrlChange","length","map","item","symbol","balance","sort","article","index","key","location","appId","serverUrl","position","bottom","flexDirection","paddingBottom","module","exports"],"mappings":"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","file":"component---src-pages-news-js-8fa3a1070ce73d0caa88.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useMoralisCloudFunction } from \"react-moralis\";\nimport upVote from \"assets/illustrations/upVote.png\";\n\nasync function handleVote(articleId, submitVote, setServiceError) {\n  console.log(\"article id \", articleId);\n  submitVote(articleId)\n    .then(result => {\n      console.log(\"result from voting\", result);\n    })\n    .catch(e => {\n      console.log(\"error while voting\", e);\n\n      setServiceError(e);\n    });\n}\n\nexport function Article({ title, domain, articleId, url, createdAt, author, totalScore, setServiceError }) {\n  const { fetch: submitVote, data: voteSubmittedResult, error: voteSubmitError, isLoading: voteSubmitIsLoading } = useMoralisCloudFunction(\n    \"voteOnArticle\",\n    { articleId },\n    { autoFetch: false }\n  );\n\n  useEffect(() => {\n    if (voteSubmitError && voteSubmitError.message == \"Validation failed. Please login to continue.\") {\n      setServiceError(\"Only authenticated users can upvote. Please try to connect your wallet\");\n    } else if (voteSubmitError && voteSubmitError.message == \"User already voted\") {\n      setServiceError(\"You already voted\");\n    } else if (voteSubmitError) {\n      voteSubmitError && setServiceError(voteSubmitError.message);\n    }\n  }, [voteSubmitError]);\n\n\n  let hoursAgo = (new Date().getTime() - new Date(createdAt).getTime()) / 1000 / 60 / 60 \n\n  return (\n    <div style={{ paddingLeft: 10 }}>\n      <div style={{ fontWeight: \"bold\" }}>\n        <img style={{ cursor: \"pointer\", height: 18, marginRight: 5 }} onClick={() => handleVote(articleId, submitVote, setServiceError)} src={upVote}></img>\n        <a style={{ textDecoration: \"none\", color: \"rgb(54, 52, 54)\" }} href={url}>\n          {title}{\" \"}\n        </a>\n        <span style={{ fontWeight: \"normal\", fontSize: \"small\" }}>({domain}) </span>\n      </div>\n      <div style={{ fontSize: \"small\", marginBottom: 20 }}>\n        <span style={{ fontWeight: \"normal\" }}>{parseInt(totalScore)} points </span> <span>by</span> <span style={{ fontWeight: \"normal\" }}> {author},</span>{\" \"}\n        <span> submitted {Number.parseFloat(hoursAgo).toFixed(2)} hours ago  </span>\n      </div>\n    </div>\n  );\n}\n\nexport default function dummy(){\n  return <></>\n}\n","import React, { useState, useEffect } from \"react\";\nimport { useMoralis, useMoralisQuery, useMoralisCloudFunction } from \"react-moralis\";\nimport { Button } from \"components/common\";\nimport { Article } from \"./article\";\nimport { author } from \"data/config\";\n\nfunction handleTitleChange(e, setTitle) {\n  setTitle(e.target.value);\n}\n\nfunction handleUrlChange(e, setUrl) {\n  setUrl(e.target.value);\n}\n\nfunction compare(a, b) {\n  return b.totalScore - a.totalScore;\n}\n\nexport function SubpageNews() {\n  const { data: articles, error, isLoading } = useMoralisQuery(\"Article\");\n  const { data: userData, error: userError, isLoading: userisLoading } = useMoralisQuery(\"User\");\n\n  //const { fetch, data:toggleOnboardingData, error: toggleOnboardingError, isLoading:toggleOnboardingDataIsLoading } = useMoralisCloudFunction(\"toggleOnboarding\", { autoFetch: false });\n\n  const { authenticate, isAuthenticated, user } = useMoralis();\n\n  const [title, setTitle] = useState(\"\");\n  const [url, setUrl] = useState(\"\");\n  const [serviceError, setServiceError] = useState();\n  const [isSubmissionVisible, setSubmissionVisibility] = useState(false);\n  const [generalError, setGeneralError] = useState();\n  const [generalInfo, setGeneralInfo] = useState();\n\n  //const { fetch: getUserRoles, data: getUserRolesResult, error: getUserRolesError, isLoading: getUserRolesErrorIsLoading } = useMoralisCloudFunction(\n   // \"getUserRoles\",\n   // {  },\n   // { autoFetch: true }\n // );\n\n\n  const { fetch: saveArticle, data: saveArticleResult, error: saveArticleError, isLoading: saveArticleIsLoading } = useMoralisCloudFunction(\n    \"saveArticle\",\n    { title, url },\n    { autoFetch: false }\n  );\n  useEffect(() => {\n    console.log(\" here are the articles \", saveArticleResult, typeof(saveArticleResult))\n    if(saveArticleResult==\"Success\"){\n      console.log(\"also called\")\n      setSubmissionVisibility(false)\n      setGeneralInfo(\"Article submitted successfully!\")\n    }\n  }, [saveArticleResult]);\n\n\n\n\n  const { fetch: getRankedArticles, data: rankedArticles, error: getRankedArticlesError, isLoading: onboardContributorIsLoading } = useMoralisCloudFunction(\n    \"getRankedArticles\",\n    {},\n    {\n      autoFetch: true,\n    }\n  );\n\n  const { fetch: onboardContributor, data: onboardContributorResponse, error: onboardContributorError, isLoading: rankedArticlesisLoading } = useMoralisCloudFunction(\n    \"onboardContributor\",\n    {},\n    {\n      autoFetch: false,\n    }\n  );\n\n  const { fetch: getShnWeightedBalance, data: shnWeightedBalance, error: shnWeightedBalanceError, isLoading: shnWeightedIsLoading } = useMoralisCloudFunction(\n    \"getShnWeightedBalance\",\n    {},\n    {\n      autoFetch: false,\n    }\n  );\n\n  if (error) {\n    return <span>ðŸ¤¯</span>;\n  }\n\n  if (isLoading) {\n    return <span>ðŸ™„</span>;\n  }\n\n  function handleNavBarSumbit(isAuthenticated, setSubmissionVisibility, setGeneralError) {\n    console.log(\" hello \", isAuthenticated);\n    if (isAuthenticated) {\n      setSubmissionVisibility(true);\n    } else {\n      setGeneralError(\n        \"Only vaccinated people can submit an article... ðŸ˜·ðŸ’‰ ðŸ‘€  Nah, we are kidding, you actually have to be contributor. Go to the ShineDAO main page to find out what that is and to complete the onboarding.\"\n      );\n    }\n  }\n  return (\n    <div style={{ width: \"100%\" }}>\n      <div style={{ boxShadow: \"0px 3px 0px 0px\", display: \"flex\", alignItems: \"baseline\", background: \"rgb(250 218 94)\", margin: \"0 auto\" }}>\n        <span>\n          <h2 style={{ color: \"rgb(54 52 54)\", display: \"inline\", paddingLeft:10 }}>Degen News</h2>\n        </span>{\" \"}\n        <span style={{ paddingLeft: 15, paddingRight: 15 }}>|</span>\n        <span onClick={() => handleNavBarSumbit(isAuthenticated, setSubmissionVisibility, setGeneralError)}>Submit</span>\n        {!isAuthenticated && (\n          <div style={{ marginLeft: \"auto\" }}>\n            <Button backgroundHover=\"#45e25a\" onClick={() => authenticate({ signingMessage: \"Authenticate with Degen News!\" })}>\n              Connect Wallet\n            </Button>\n          </div>\n        )}\n      </div>\n\n      <div>\n        {false && (\n          <img\n            style={{ height: 190, marginTop: 0, float: \"right\" }}\n            src=\"https://aws1.discourse-cdn.com/standard21/uploads/shinedao/original/1X/dca391ba2f0d2a5f8487017e7deb6931b46b6288.jpeg\"\n          ></img>\n        )}\n        {isAuthenticated && (\n          <div>\n            <br></br>\n            <h3>Welcomee {user.get(\"username\")}, good to see you again!</h3>\n          </div>\n        )}\n        {isSubmissionVisible && (\n          <div>\n            <label htmlFor=\"title\">Title: </label>\n            <input value={title} onChange={e => handleTitleChange(e, setTitle)} type=\"text\" id=\"title\" name=\"title\"></input>\n            <br></br>\n            <label htmlFor=\"url\">URL: </label>\n            <input value={url} onChange={e => handleUrlChange(e, setUrl)} type=\"text\" id=\"url\" name=\"url\"></input>\n            <br></br>\n            <Button onClick={() => !saveArticleIsLoading && saveArticle()}>Submit</Button>\n          </div>\n        )}\n        {false && <Button onClick={() => getRankedArticles()}>Get Ranked Articles</Button>}\n        {false && <Button onClick={() => getShnWeightedBalance()}>Get weighted SHN balance</Button>}\n        {false && <Button onClick={() => onboardContributor()}>Onboard Contributor</Button>}\n        {generalError && ` ${generalError}`}\n        {generalInfo && <div> {generalInfo}<br></br></div>}\n\n        {saveArticleError && `Error: ${saveArticleError}`}\n        {serviceError && <div style={{color:\"tomato\"}}> {serviceError}</div>}\n        {shnWeightedBalance &&\n          shnWeightedBalance.length > 0 &&\n          shnWeightedBalance.map(item => {\n            return (\n              <div>\n                Symbol: {item.symbol} {item.balance}\n              </div>\n            );\n          })}\n        <br></br>\n        <div style={{ width: \"100%\" }}>\n          {false && rankedArticles && console.log(\"ranked and sorted articles \", [...rankedArticles].sort(compare))}\n          {rankedArticles &&\n            rankedArticles.length != 0 &&\n            [...rankedArticles].sort(compare).map((article, index) => {\n              return (\n                <Article\n                  setServiceError={setServiceError}\n                  totalScore={article.totalScore}\n                  key={`key-${index}`}\n                  author={article.author}\n                  url={article.url}\n                  createdAt={article.createdAt}\n                  articleId={article.articleId}\n                  title={article.title}\n                  domain={article.domain}\n                ></Article>\n              );\n            })}\n        </div>\n      </div>\n      {console.log(\"type of articles\", articles.length)}\n      {false &&\n        articles.length != 0 &&\n        articles.map((article, index) => {\n          console.log(\"single article \", article);\n          return <Article key={`key-${index}`} title={article.attributes.title} url={article.attributes.url}></Article>;\n        })}\n      {}\n      {false && <pre>{JSON.stringify(rankedArticles, null, 2)}</pre>}\n      {false && <pre>{JSON.stringify(shnWeightedBalance, null, 2)}</pre>}\n      {false && <pre>{JSON.stringify(articles, null, 2)}</pre>}\n      {false && <pre>{JSON.stringify(userData, null, 2)}</pre>}\n    </div>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { Layout, SEO, Button, Card, Text, MobileDiv } from \"components/common\";\nimport { Header } from \"components/theme\";\nimport { SubpageNews } from \"../components/common/subpages/subpageNews\";\nimport { MoralisProvider } from \"react-moralis\";\n\n\n\nexport default ({ location }) => {\n  \n  return (\n    <MoralisProvider appId=\"jTkB07PzkYA1pq8KpEaR3oDOApdmSpgJeCSXgJYF\" serverUrl=\"https://fsnbzd9rxwph.usemoralis.com:2053/server\">\n      <Layout position=\"absolute\" bottom=\"4px\" width=\"100%\" height=\"60px\">\n        <SEO />\n        <Header />\n\n\n        <MobileDiv width=\"90%\" background=\"whitesmoke\" style={{ display: \"flex\", alignItems: \"center\", flexDirection: \"column\", paddingBottom: \"200px\" }}>\n  \n          <SubpageNews></SubpageNews>\n        </MobileDiv>\n      </Layout>\n    </MoralisProvider>\n  );\n};\n","module.exports = __webpack_public_path__ + \"static/upVote-59be2780a357ad49191ef4a6e5b67d8f.png\";"],"sourceRoot":""}