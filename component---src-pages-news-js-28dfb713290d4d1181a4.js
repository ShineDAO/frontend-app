(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{FJi0:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),l=a("1Qp6"),o=a("oR2e"),c=a("KQm4"),i=a("/19t"),u=a("HaE+"),s=a("o0o1"),d=a.n(s),m=a("Gi8J"),g=a.n(m);function h(){return(h=Object(u.a)(d.a.mark((function e(t,a,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("article id ",t),a(t).then((function(e){console.log("result from voting",e)})).catch((function(e){console.log("error while voting",e),n(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){var t=e.title,a=e.domain,l=e.articleId,o=e.url,c=e.createdAt,u=e.author,s=e.totalScore,d=e.setServiceError,m=Object(i.c)("voteOnArticle",{articleId:l},{autoFetch:!1}),f=m.fetch,p=(m.data,m.error);m.isLoading;Object(n.useEffect)((function(){p&&"Validation failed. Please login to continue."==p.message?d("Only authenticated users can upvote. Please try to connect your wallet"):p&&"User already voted"==p.message?d("You already voted"):p&&p&&d(p.message)}),[p]);var b=((new Date).getTime()-new Date(c).getTime())/1e3/60/60;return r.a.createElement("div",{style:{paddingLeft:10}},r.a.createElement("div",{style:{fontWeight:"bold"}},r.a.createElement("img",{style:{cursor:"pointer",height:18,marginRight:5},onClick:function(){return function(e,t,a){return h.apply(this,arguments)}(l,f,d)},src:g.a}),r.a.createElement("a",{style:{textDecoration:"none",color:"rgb(54, 52, 54)"},href:o},t," "),r.a.createElement("span",{style:{fontWeight:"normal",fontSize:"small"}},"(",a,") ")),r.a.createElement("div",{style:{fontSize:"small",marginBottom:20}},r.a.createElement("span",{style:{fontWeight:"normal"}},parseInt(s)," points ")," ",r.a.createElement("span",null,"by")," ",r.a.createElement("span",{style:{fontWeight:"normal"}}," ",u,",")," ",r.a.createElement("span",null," submitted ",Number.parseFloat(b).toFixed(2)," hours ago  ")))}a("S6qR");function p(e,t){return t.totalScore-e.totalScore}function b(){var e=Object(i.d)("Article"),t=e.data,a=e.error,o=e.isLoading,u=Object(i.d)("User"),s=(u.data,u.error,u.isLoading,Object(i.b)()),d=s.authenticate,m=s.isAuthenticated,g=s.user,h=Object(n.useState)(""),b=h[0],E=h[1],v=Object(n.useState)(""),y=v[0],O=v[1],S=Object(n.useState)(),w=S[0],j=S[1],x=Object(n.useState)(!1),k=x[0],A=x[1],L=Object(n.useState)(),F=L[0],I=L[1],C=Object(n.useState)(),D=C[0],J=C[1],R=Object(n.useState)(),W=R[0],U=R[1],z=Object(i.c)("saveArticle",{title:b,url:y},{autoFetch:!1}),B=z.fetch,N=z.data,P=z.error,T=z.isLoading,q=Object(i.c)("onboardPreviousDataIfOldUser",{ethAddress:W},{autoFetch:!1}),G=q.fetch;q.data,q.error,q.isLoading;Object(n.useEffect)((function(){if(null!==g){var e=g.get("ethAddress");console.log(" user data 321 ",e),U(e)}}),[g]),Object(n.useEffect)((function(){void 0!==W&&(console.log("eth address data ",W),G())}),[W]),Object(n.useEffect)((function(){console.log(" here are the articles ",N,typeof N),"Success"==N&&(console.log("also called"),A(!1),J("Article submitted successfully!"))}),[N]);var Y=Object(i.c)("getRankedArticles",{},{autoFetch:!0}),H=(Y.fetch,Y.data),K=(Y.error,Y.isLoading,Object(i.c)("onboardContributor",{},{autoFetch:!1})),Q=(K.fetch,K.data,K.error,K.isLoading,Object(i.c)("getShnWeightedBalance",{},{autoFetch:!1})),V=(Q.fetch,Q.data);Q.error,Q.isLoading;if(a)return r.a.createElement("span",null,"ðŸ¤¯");if(o)return r.a.createElement("span",null,"ðŸ™„");return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("div",{style:{boxShadow:"0px 3px 0px 0px",display:"flex",alignItems:"baseline",background:"rgb(250 218 94)",margin:"0 auto"}},r.a.createElement("span",null,r.a.createElement("h2",{style:{color:"rgb(54 52 54)",display:"inline",paddingLeft:10}},"Degen News"))," ",r.a.createElement("span",{style:{paddingLeft:15,paddingRight:15}},"|"),r.a.createElement("span",{onClick:function(){return function(e,t,a){console.log(" hello ",e),e?t(!0):a("Only vaccinated people can submit an article... ðŸ˜·ðŸ’‰ ðŸ‘€  Nah, we are kidding, you actually have to be contributor. Go to the ShineDAO main page to find out what that is and to complete the onboarding.")}(m,A,I)}},"Submit"),!m&&r.a.createElement("div",{style:{marginLeft:"auto"}},r.a.createElement(l.a,{backgroundHover:"#45e25a",onClick:function(){return d({signingMessage:"Authenticate with Degen News!"})}},"Connect Wallet"))),r.a.createElement("div",null,!1,m&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h3",null,"Welcomee ",g.get("username"),", good to see you again!")),k&&r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"title"},"Title: "),r.a.createElement("input",{value:b,onChange:function(e){return function(e,t){t(e.target.value)}(e,E)},type:"text",id:"title",name:"title"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"url"},"URL: "),r.a.createElement("input",{value:y,onChange:function(e){return function(e,t){t(e.target.value)}(e,O)},type:"text",id:"url",name:"url"}),r.a.createElement("br",null),r.a.createElement(l.a,{onClick:function(){return!T&&B()}},"Submit")),!1,!1,!1,F&&" "+F,D&&r.a.createElement("div",null," ",D,r.a.createElement("br",null)),P&&"Error: "+P,w&&r.a.createElement("div",{style:{color:"tomato"}}," ",w),V&&V.length>0&&V.map((function(e){return r.a.createElement("div",null,"Symbol: ",e.symbol," ",e.balance)})),r.a.createElement("br",null),r.a.createElement("div",{style:{width:"100%"}},!1,H&&0!=H.length&&Object(c.a)(H).sort(p).map((function(e,t){return r.a.createElement(f,{setServiceError:j,totalScore:e.totalScore,key:"key-"+t,author:e.author,url:e.url,createdAt:e.createdAt,articleId:e.articleId,title:e.title,domain:e.domain})})))),console.log("type of articles",t.length),!1,!1,!1,!1,!1)}t.default=function(e){e.location;return r.a.createElement(i.a,{appId:"jTkB07PzkYA1pq8KpEaR3oDOApdmSpgJeCSXgJYF",serverUrl:"https://fsnbzd9rxwph.usemoralis.com:2053/server"},r.a.createElement(l.f,{position:"absolute",bottom:"4px",width:"100%",height:"60px"},r.a.createElement(l.i,null),r.a.createElement(o.b,null),r.a.createElement(l.h,{width:"90%",background:"whitesmoke",style:{display:"flex",alignItems:"center",flexDirection:"column",paddingBottom:"200px"}},r.a.createElement(b,null))))}},Gi8J:function(e,t,a){e.exports=a.p+"static/upVote-59be2780a357ad49191ef4a6e5b67d8f.png"}}]);
//# sourceMappingURL=component---src-pages-news-js-28dfb713290d4d1181a4.js.map