(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{FJi0:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),o=a("1Qp6"),l=(a("oR2e"),a("KQm4")),c=a("HaE+"),i=a("o0o1"),s=a.n(i),u=a("/19t"),d=a("zrW2"),f=a("Gi8J"),p=a.n(f),m=a("gm8Z"),g=a.n(m);function h(){return(h=Object(c.a)(s.a.mark((function e(t,a,n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("article id ",t),a(t).then((function(e){console.log("result from voting",e),r()})).catch((function(e){console.log("error while voting",e),n(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(c.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Are you sure that you want to delete the article")){e.next=5;break}return e.next=3,t();case 3:console.log("deleted"),a();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){var t=e.title,a=e.domain,l=e.articleId,c=e.url,i=e.userVotedAlready,s=e.createdAt,f=e.author,m=e.totalScore,E=e.setServiceError,y=e.getRankedArticles,v=e.userRoles,w=e.index,O=Object(n.useContext)(d.a).theme,j=Object(u.c)("voteOnArticle",{articleId:l},{autoFetch:!1}),x=j.fetch,k=(j.data,j.error),S=j.isLoading,A=Object(u.c)("deleteArticle",{articleId:l},{autoFetch:!1}),L=A.fetch;A.data,A.error,A.isLoading;Object(n.useEffect)((function(){k&&"Validation failed. Please login to continue."==k.message?E("Only authenticated users can upvote. Please try to connect your wallet"):k&&"User already voted"==k.message?E("You already voted"):k&&k&&E(k.message)}),[k]);var F=((new Date).getTime()-new Date(s).getTime())/1e3/60/60;return r.a.createElement("div",{style:{paddingLeft:10}},r.a.createElement("div",{style:{fontWeight:"bold"}},r.a.createElement("h4",{style:{display:"inline-block",marginRight:5,color:"#a2a2a2"}},w+1,". "),!i&&r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement(g.a,{style:{},color:"#3f3d56",loading:S,size:3,margin:2}),r.a.createElement("img",{style:{cursor:"pointer",height:13,marginRight:3},onClick:function(){return function(e,t,a,n){return h.apply(this,arguments)}(l,x,E,y)},src:p.a})),r.a.createElement(o.h,{href:c},t," "),r.a.createElement("span",{style:{fontWeight:"normal",fontSize:"small",color:"#a2a2a2"}},"(",a,") ")),r.a.createElement(o.k,{theme:O},r.a.createElement("span",{style:{fontWeight:"normal"}},parseInt(m)," points ")," ",r.a.createElement("span",null,"by")," ",r.a.createElement("span",{style:{fontWeight:"normal"}}," ",f,",")," ",r.a.createElement("span",null," submitted ",Number.parseFloat(F).toFixed(2)," hours ago "),v&&v.includes("Moderator")&&r.a.createElement("span",{onClick:function(){return function(e,t){return b.apply(this,arguments)}(L,y)},style:{fontWeight:"bold",cursor:"pointer"}},"Delete")))}var y=a("HoMr");function v(e,t){return t.totalScore-e.totalScore}function w(){var e=Object(u.b)().Moralis,t=Object(u.b)(),a=t.authenticate,i=t.isAuthenticated,d=t.user,f=Object(u.d)("Article"),p=f.data,m=f.error,h=f.isLoading,b=Object(u.d)("User"),w=(b.data,b.error,b.isLoading,Object(n.useState)("")),O=w[0],j=w[1],x=Object(n.useState)(""),k=x[0],S=x[1],A=Object(n.useState)(),L=A[0],F=A[1],C=Object(n.useState)(!1),R=C[0],D=C[1],I=Object(n.useState)(),W=I[0],J=I[1],U=Object(n.useState)(),z=U[0],N=U[1],P=Object(n.useState)(),H=P[0],M=P[1],T=Object(u.c)("saveArticle",{title:O,url:k},{autoFetch:!1}),V=T.fetch,q=T.data,B=T.error,G=T.isLoading,Q=Object(u.c)("onboardPreviousDataIfOldUser",{ethAddress:H},{autoFetch:!1}),Y=Q.fetch;Q.data,Q.error,Q.isLoading;Object(n.useEffect)((function(){if(console.log("user 3213",d),null!==d){var e=d.get("ethAddress");console.log(" user data 321 ",e),_(),M(e)}}),[d]),Object(n.useEffect)((function(){console.log(" is authenticated ",i)}),[i]),Object(n.useEffect)((function(){void 0!==H&&(console.log("eth address data ",H),Y())}),[H]);var K=Object(u.c)("getRankedArticles",{},{autoFetch:!0}),_=K.fetch,X=K.data;K.error,K.isLoading;Object(n.useEffect)((function(){console.log(" here are the articles ",q,typeof q),"Success"==q&&(console.log("also called"),D(!1),N("Article submitted successfully!"),j(""),S(""),_(),window.location.reload(!0))}),[q]);var Z=Object(u.c)("onboardContributor",{},{autoFetch:!1}),$=(Z.fetch,Z.data,Z.error,Z.isLoading,Object(u.c)("getShnPrice",{},{autoFetch:!0})),ee=($.fetch,$.data);$.error,$.isLoading;Object(n.useEffect)((function(){ee&&console.log("data ",ee)}),[ee]);var te=Object(u.c)("getShnWeightedBalance",{},{autoFetch:!1}),ae=(te.fetch,te.data),ne=(te.error,te.isLoading,Object(u.c)("getUserRoles",{},{autoFetch:!0})),re=(ne.fetch,ne.data);ne.error,ne.isLoading;if(Object(n.useEffect)((function(){console.log("user roles ",re)}),[re]),Object(n.useEffect)((function(){console.log("isSaveArticleLoading",G),G&&D(!1)}),[G]),m)return r.a.createElement("span",null,"ðŸ¤¯ Oops, there has been some error. Please hard refresh the page to clean the storage. (Mac users: Hold down Shift and click the Reload button. Windows users: hold down Ctrl and then press F5) ");if(h)return r.a.createElement("span",null,"ðŸ™„ loading...");function oe(){return(oe=Object(c.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.User.logOut();case 2:window.location.reload(!0);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("div",{style:{boxShadow:"0px 3px 0px 0px",display:"flex",alignItems:"baseline",background:"rgb(250 218 94)",margin:"0 auto"}},r.a.createElement("span",null,r.a.createElement("h2",{style:{color:"rgb(54 52 54)",display:"inline",paddingLeft:10}},"Degen News"))," ",r.a.createElement("span",{style:{paddingLeft:15,paddingRight:15}},"|"),r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return function(e,t,a){console.log(" hello ",e),e?t(!0):a("Only vaccinated people can submit an article... ðŸ˜·ðŸ’‰ ðŸ‘€  Nah, we are kidding, you actually have to be contributor. Go to the ShineDAO main page to find out what that is and to complete the onboarding."),R&&(N(),t(!R))}(i,D,J)}},"Submit"),r.a.createElement("span",{style:{paddingLeft:15,paddingRight:15}},"|"),r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return window.open("https://docs.shinedao.finance/community/degen-news","_self")}},"FAQ"),i?r.a.createElement("span",{onClick:function(){return function(){return oe.apply(this,arguments)}()},style:{marginLeft:"auto",paddingRight:8,cursor:"pointer"}},"Log out"):r.a.createElement("div",{style:{marginLeft:"auto"}},r.a.createElement(o.a,{backgroundHover:"#45e25a",onClick:function(){return Object(y.j)(a,e)}},"Connect Wallet"))),r.a.createElement("div",null,!1,i&&ee&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(o.l,{style:{display:"inline-block"},color:"#181717",padding:"0px 0px 0px 10px"},"Welcome ",d.get("username"),", submit your most interesting DeFi news!"),r.a.createElement(o.l,{disableMobileFloat:"true",float:"right",style:{display:"inline-block",marginRight:8},color:"#ffa547",padding:"0px 0px 0px 10px"},"Current SHN price:"," ",r.a.createElement("a",{style:{cursor:"pointer",color:"#6c6c6f"},onClick:function(){return window.open("https://info.quickswap.exchange/pair/0xf6467b4178d54251d253ac0095f31444f0f6efbc","_self")}}," ","$",parseFloat(ee).toFixed(4)))),r.a.createElement(g.a,{style:{},color:"#3f3d56",loading:G,size:15,margin:10}),R&&r.a.createElement("div",{style:{paddingLeft:5}},r.a.createElement("label",{htmlFor:"title"},"Title: "),r.a.createElement("input",{value:O,onChange:function(e){return function(e,t){t(e.target.value)}(e,j)},type:"text",id:"title",name:"title"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"url"},"URL: "),r.a.createElement("input",{value:k,onChange:function(e){return function(e,t){t(e.target.value)}(e,S)},type:"text",id:"url",name:"url"}),r.a.createElement("br",null),r.a.createElement(o.a,{onClick:function(){return!G&&V()}},"Submit")),!1,!1,!1,W&&" "+W,z&&r.a.createElement("div",{style:{paddingLeft:10}}," ",z,r.a.createElement("br",null)),B&&r.a.createElement("div",{style:{paddingLeft:10,color:"tomato"}}," Error: ",B.message," "),L&&r.a.createElement("div",null," ",L),ae&&ae.length>0&&ae.map((function(e){return r.a.createElement("div",null,"Symbol: ",e.symbol," ",e.balance)})),r.a.createElement("br",null),r.a.createElement("div",{style:{width:"100%"}},!1,X&&0!=X.length&&Object(l.a)(X).sort(v).map((function(e,t){return r.a.createElement(E,{getRankedArticles:_,setServiceError:F,totalScore:e.totalScore,key:"key-"+t,index:t,author:e.author,url:e.url,createdAt:e.createdAt,articleId:e.articleId,title:e.title,domain:e.domain,userVotedAlready:e.userVotedAlready,userRoles:re})})))),console.log("type of articles",p.length),!1,!1,!1,!1,!1)}t.default=function(e){e.location;return r.a.createElement(u.a,{appId:"jTkB07PzkYA1pq8KpEaR3oDOApdmSpgJeCSXgJYF",serverUrl:"https://fsnbzd9rxwph.usemoralis.com:2053/server"},r.a.createElement(o.f,{position:"absolute",bottom:"4px",width:"100%",height:"60px"},r.a.createElement(o.j,{useDegenNews:"true",title:"Degen News",description:"Degenerate news 4 degenerate frens"}),!1,r.a.createElement("div",{style:{marginTop:6}}),r.a.createElement(o.i,{mobileWidth:"100%",width:"90%",background:"whitesmoke",style:{display:"flex",alignItems:"center",flexDirection:"column",paddingBottom:"200px"}},r.a.createElement(w,null))))}},Gi8J:function(e,t,a){e.exports=a.p+"static/upVote-59be2780a357ad49191ef4a6e5b67d8f.png"}}]);
//# sourceMappingURL=component---src-pages-news-js-1997b90dd09b5af76d67.js.map