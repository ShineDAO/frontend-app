(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{FJi0:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),l=a("1Qp6"),o=a("oR2e"),c=a("KQm4"),i=a("HaE+"),u=a("o0o1"),s=a.n(u),d=a("/19t"),m=a("zrW2"),p=a("Gi8J"),f=a.n(p);function g(){return(g=Object(i.a)(s.a.mark((function e(t,a,n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("article id ",t),a(t).then((function(e){console.log("result from voting",e),r()})).catch((function(e){console.log("error while voting",e),n(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){var t=e.title,a=e.domain,o=e.articleId,c=e.url,i=e.userVotedAlready,u=e.createdAt,s=e.author,p=e.totalScore,h=e.setServiceError,b=e.getRankedArticles,E=Object(n.useContext)(m.a).theme,y=Object(d.c)("voteOnArticle",{articleId:o},{autoFetch:!1}),v=y.fetch,O=(y.data,y.error);y.isLoading;Object(n.useEffect)((function(){O&&"Validation failed. Please login to continue."==O.message?h("Only authenticated users can upvote. Please try to connect your wallet"):O&&"User already voted"==O.message?h("You already voted"):O&&O&&h(O.message)}),[O]);var j=((new Date).getTime()-new Date(u).getTime())/1e3/60/60;return r.a.createElement("div",{style:{paddingLeft:10}},r.a.createElement("div",{style:{fontWeight:"bold"}},!i&&r.a.createElement("img",{style:{cursor:"pointer",height:18,marginRight:5},onClick:function(){return function(e,t,a,n){return g.apply(this,arguments)}(o,v,h,b)},src:f.a}),r.a.createElement(l.h,{href:c},t," "),r.a.createElement("span",{style:{fontWeight:"normal",fontSize:"small",color:"#a2a2a2"}},"(",a,") ")),r.a.createElement(l.k,{theme:E},r.a.createElement("span",{style:{fontWeight:"normal"}},parseInt(p)," points ")," ",r.a.createElement("span",null,"by")," ",r.a.createElement("span",{style:{fontWeight:"normal"}}," ",s,",")," ",r.a.createElement("span",null," submitted ",Number.parseFloat(j).toFixed(2)," hours ago ")))}a("S6qR");var b=a("HoMr");function E(e,t){return t.totalScore-e.totalScore}function y(){var e=Object(d.b)(),t=e.authenticate,a=e.isAuthenticated,o=e.user,u=e.Moralis,m=Object(d.d)("Article"),p=m.data,f=m.error,g=m.isLoading,y=Object(d.d)("User"),v=(y.data,y.error,y.isLoading,Object(n.useState)("")),O=v[0],j=v[1],w=Object(n.useState)(""),S=w[0],x=w[1],k=Object(n.useState)(),A=k[0],L=k[1],F=Object(n.useState)(!1),C=F[0],I=F[1],R=Object(n.useState)(),W=R[0],D=R[1],J=Object(n.useState)(),U=J[0],V=J[1],z=Object(n.useState)(),P=z[0],T=z[1],q=Object(d.c)("saveArticle",{title:O,url:S},{autoFetch:!1}),B=q.fetch,G=q.data,H=q.error,N=q.isLoading,Y=Object(d.c)("onboardPreviousDataIfOldUser",{ethAddress:P},{autoFetch:!1}),K=Y.fetch;Y.data,Y.error,Y.isLoading;Object(n.useEffect)((function(){if(console.log("user 3213",o),null!==o){var e=o.get("ethAddress");console.log(" user data 321 ",e),Q(),T(e)}}),[o]),Object(n.useEffect)((function(){console.log(" is authenticated ",a)}),[a]),Object(n.useEffect)((function(){void 0!==P&&(console.log("eth address data ",P),K())}),[P]);var M=Object(d.c)("getRankedArticles",{},{autoFetch:!0}),Q=M.fetch,X=M.data;M.error,M.isLoading;Object(n.useEffect)((function(){console.log(" here are the articles ",G,typeof G),"Success"==G&&(console.log("also called"),I(!1),V("Article submitted successfully!"),Q())}),[G]);var Z=Object(d.c)("onboardContributor",{},{autoFetch:!1}),$=(Z.fetch,Z.data,Z.error,Z.isLoading,Object(d.c)("getShnWeightedBalance",{},{autoFetch:!1})),_=($.fetch,$.data);$.error,$.isLoading;if(f)return r.a.createElement("span",null,"ðŸ¤¯");if(g)return r.a.createElement("span",null,"ðŸ™„");function ee(){return(ee=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.User.logOut();case 2:window.location.reload(!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("div",{style:{boxShadow:"0px 3px 0px 0px",display:"flex",alignItems:"baseline",background:"rgb(250 218 94)",margin:"0 auto"}},r.a.createElement("span",null,r.a.createElement("h2",{style:{color:"rgb(54 52 54)",display:"inline",paddingLeft:10}},"Degen News"))," ",r.a.createElement("span",{style:{paddingLeft:15,paddingRight:15}},"|"),r.a.createElement("span",{onClick:function(){return function(e,t,a){console.log(" hello ",e),e?t(!0):a("Only vaccinated people can submit an article... ðŸ˜·ðŸ’‰ ðŸ‘€  Nah, we are kidding, you actually have to be contributor. Go to the ShineDAO main page to find out what that is and to complete the onboarding.")}(a,I,D)}},"Submit"),a?r.a.createElement("span",{onClick:function(){return function(){return ee.apply(this,arguments)}()},style:{marginLeft:"auto",paddingRight:8,cursor:"pointer"}},"Log out"):r.a.createElement("div",{style:{marginLeft:"auto"}},r.a.createElement(l.a,{backgroundHover:"#45e25a",onClick:function(){return Object(b.i)(t,u)}},"Connect Wallet"))),r.a.createElement("div",null,!1,a&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(l.l,{fontWeight:"bold",color:"#181717",padding:"0px 0px 0px 10px"},"Welcome ",o.get("username"),", submit your most interesting DeFi news!")),C&&r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"title"},"Title: "),r.a.createElement("input",{value:O,onChange:function(e){return function(e,t){t(e.target.value)}(e,j)},type:"text",id:"title",name:"title"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"url"},"URL: "),r.a.createElement("input",{value:S,onChange:function(e){return function(e,t){t(e.target.value)}(e,x)},type:"text",id:"url",name:"url"}),r.a.createElement("br",null),r.a.createElement(l.a,{onClick:function(){return!N&&B()}},"Submit")),!1,!1,!1,W&&" "+W,U&&r.a.createElement("div",null," ",U,r.a.createElement("br",null)),H&&"Error: "+H,A&&r.a.createElement("div",{style:{color:"tomato"}}," ",A),_&&_.length>0&&_.map((function(e){return r.a.createElement("div",null,"Symbol: ",e.symbol," ",e.balance)})),r.a.createElement("br",null),r.a.createElement("div",{style:{width:"100%"}},!1,X&&0!=X.length&&Object(c.a)(X).sort(E).map((function(e,t){return r.a.createElement(h,{getRankedArticles:Q,setServiceError:L,totalScore:e.totalScore,key:"key-"+t,author:e.author,url:e.url,createdAt:e.createdAt,articleId:e.articleId,title:e.title,domain:e.domain,userVotedAlready:e.userVotedAlready})})))),console.log("type of articles",p.length),!1,!1,!1,!1,!1)}t.default=function(e){e.location;return r.a.createElement(d.a,{appId:"jTkB07PzkYA1pq8KpEaR3oDOApdmSpgJeCSXgJYF",serverUrl:"https://fsnbzd9rxwph.usemoralis.com:2053/server"},r.a.createElement(l.f,{position:"absolute",bottom:"4px",width:"100%",height:"60px"},r.a.createElement(l.j,null),r.a.createElement(o.b,null),r.a.createElement(l.i,{width:"90%",background:"whitesmoke",style:{display:"flex",alignItems:"center",flexDirection:"column",paddingBottom:"200px"}},r.a.createElement(y,null))))}},Gi8J:function(e,t,a){e.exports=a.p+"static/upVote-59be2780a357ad49191ef4a6e5b67d8f.png"}}]);
//# sourceMappingURL=component---src-pages-news-js-57b5eba19ad5ba0b0c2e.js.map